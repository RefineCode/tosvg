{"version":3,"sources":["webpack:///./src/App.vue?cd74","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/components/utils.js","webpack:///./src/components/InputFile.vue?bcd9","webpack:///src/components/FileUpload.vue","webpack:///./src/components/InputFile.vue","webpack:///src/components/InputFile.vue","webpack:///./src/components/FileUpload.vue?85b8","webpack:///./src/components/FileUpload.vue","webpack:///src/components/drawio_iframe.vue","webpack:///./src/components/drawio_iframe.vue?1adc","webpack:///./src/components/drawio_iframe.vue","webpack:///src/components/ImageConvert.vue","webpack:///./src/components/ImageConvert.vue?6534","webpack:///./src/components/ImageConvert.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","pako","bytesToString","arr","result","Array","length","i","String","fromCharCode","join","parseXml","xml","window","DOMParser","parseFromString","doc","document","implementation","createDocument","ActiveXObject","createXmlDocument","async","loadXML","toolingUtils","thisObject","funct","apply","arguments","crcTable","n","c","k","updateCRC","crc","data","off","len","toolingClient","navigator","userAgent","indexOf","utils","compress","tmp","deflateRaw","encodeURIComponent","btoa","Base64","encode","createMxGraphModel","imageData","width","height","xmlData","xmlDoc","mxGraphModelNode","documentElement","base64","substring","setAttribute","rootNode","createElement","append","mxCellNode","mxCellNode1","mxCellNode2","styleValue","mxGeometryNode","XMLSerializer","serializeToString","e","extractGraphModelFromPng","binary","atob","decode","f","fn","error","pos","fread","d","count","start","bytes","charCodeAt","type","value","parsePng","idx","inflateRaw","replace","vals","split","charAt","decodeURIComponent","writeGraphModelToPng","key","writeInt","num","chunkData","components_InputFile","_vm","name","$parent","inputId","accept","webkitdirectory","directory","features","multiple","html5","on","change","FileUpload","InputFile","InputFile_normalizeComponent","$destroy","target","$el","Boolean","Number","Object","$forceUpdate","drop","file","undefined","_active","files","maps","oldFile","_key","emitInput","index","addIndex","_files","size","extends_default","putAction","postAction","timeout","headers","clear","newFiles","addFiles","_i","_file2","el","_this","getAsFile","item","results","_i3","_this2","createReader","readEntries","id1","id2","file1","file2","newFile","isPrevent","uploading","_this3","extensions","XMLHttpRequest","queryString","FormData","form","_this4","_file","speedTime2","speedLoaded","loaded","interval","abort","complete","responseText","xhr","body","_this5","preventDefault","input","iframe","onKeydown","innerHTML","getResponseData","response","submit","res","_el","dataTransfer","components_FileUpload","class","className","_t","_v","src_components_FileUpload","FileUpload_normalizeComponent","drawio_iframe","href","editor","fixed","frame","url","components_drawio_iframe","style","src","frameborder","_e","src_components_drawio_iframe","drawio_iframe_normalizeComponent","vue_runtime_esm","component","ImageConvert","DrawioIFrame","naturalWidth","naturalHeight","modelXml","editInDrawio","drawIoWindow","insertModelInPng","closed","evt","stringify_default","action","self","xmlpng","format","spinKey","receive","close","focus","filename","event","click","currentFileName","alert","_x","message","FileReader","prevent","webkitURL","components_ImageConvert","staticClass","directives","rawName","$refs","upload","dropActive","expression","edit","for","ref","post-action","input-filter","inputFilter","input-file","inputFile","model","callback","$$v","$event","editSave","reset","src_components_ImageConvert","ImageConvert_normalizeComponent","use","vue_router_esm","router","routes","path","config","productionTip","h"],"mappings":"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","file":"static/js/app.5273bdc36b11d03c7721.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1e12c2e0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1e12c2e0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1e12c2e0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App'\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var pako = require('pako');\r\n\r\nfunction stringToBytes(str)\r\n{\r\n\tvar arr = new Array(str.length);\r\n\r\n    for (var i = 0; i < str.length; i++)\r\n    {\r\n        arr[i] = str.charCodeAt(i);\r\n    }\r\n    \r\n    return arr;\r\n};\r\n\r\nfunction bytesToString(arr)\r\n{\r\n\tvar result = new Array(arr.length);\r\n\r\n    for (var i = 0; i < arr.length; i++)\r\n    {\r\n    \tresult[i] = String.fromCharCode(arr[i]);\r\n    }\r\n    \r\n    return result.join('')\r\n};\r\n\r\nfunction encode(data)\r\n{\r\n    if (document.getElementById('encodeCheckbox').checked)\r\n    {\r\n        try\r\n        {\r\n            data = encodeURIComponent(data);\r\n        }\r\n        catch (e)\r\n        {\r\n            console.log(e);\r\n            alert('encodeURIComponent failed: ' + e);\r\n            \r\n            return;\r\n        }\r\n    }\r\n\r\n    if (document.getElementById('deflateCheckbox').checked && data.length > 0)\r\n    {\r\n\t\ttry\r\n        {\r\n        \tdata = bytesToString(pako.deflateRaw(data));\r\n        }\r\n        catch (e)\r\n        {\r\n            console.log(e);\r\n            alert('deflateRaw failed: ' + e);\r\n            \r\n            return;\r\n        }\r\n    }\r\n\r\n    if (document.getElementById('base64Checkbox').checked)\r\n    {\r\n    \ttry\r\n    \t{\r\n        \tdata = btoa(data);\r\n        }\r\n        catch (e)\r\n        {\r\n            console.log(e);\r\n            alert('atob failed: ' + e);\r\n            \r\n            return;\r\n        }\r\n    }\r\n\r\n\tif (data.length > 0)\r\n\t{\r\n    \tdocument.getElementById('textarea').value = data;\r\n    }\r\n};\r\n\r\nfunction removeLinebreaks(data)\r\n{\r\n    document.getElementById('textarea').value = data.replace(/(\\r\\n|\\n|\\r)/gm, '');\r\n};\r\n\r\nfunction decode(data)\r\n{\r\n    try\r\n    {\r\n        var node = parseXml(data).documentElement;\r\n\r\n        if (node != null && node.nodeName == 'mxfile')\r\n        {\r\n            var diagrams = node.getElementsByTagName('diagram');\r\n\r\n            if (diagrams.length > 0)\r\n            {\r\n                data = getTextContent(diagrams[0]);\r\n            }\r\n        }\r\n    }\r\n    catch (e)\r\n    {\r\n        // ignore\r\n    }\r\n\r\n    if (document.getElementById('base64Checkbox').checked)\r\n    {\r\n        try\r\n        {\r\n            data = atob(data);\r\n        }\r\n        catch (e)\r\n        {\r\n            console.log(e);\r\n            alert('atob failed: ' + e);\r\n            \r\n            return;\r\n        }\r\n    }\r\n\r\n    if (document.getElementById('deflateCheckbox').checked && data.length > 0)\r\n    {\r\n        try\r\n        {\r\n            data = bytesToString(pako.inflateRaw(data));\r\n        }\r\n        catch (e)\r\n        {\r\n            console.log(e);\r\n            alert('inflateRaw failed: ' + e);\r\n            \r\n            return;\r\n        }\r\n    }\r\n\r\n    if (document.getElementById('encodeCheckbox').checked)\r\n    {\r\n        try\r\n        {\r\n            data = decodeURIComponent(data);\r\n        }\r\n        catch (e)\r\n        {\r\n            console.log(e);\r\n            alert('decodeURIComponent failed: ' + e);\r\n            \r\n            return;\r\n        }\r\n    }\r\n    \r\n\tif (data.length > 0)\r\n\t{\r\n    \tdocument.getElementById('textarea').value = data;\r\n    }\r\n};\r\n\r\nfunction parseXml(xml)\r\n{\r\n    if (window.DOMParser)\r\n    {\r\n        var parser = new DOMParser();\r\n\r\n        return parser.parseFromString(xml, 'text/xml');\r\n    }\r\n    else\r\n    {\r\n        var result = createXmlDocument();\r\n\r\n        result.async = 'false';\r\n        result.loadXML(xml);\r\n\r\n        return result;\r\n    }\r\n};\r\n\r\nfunction createXmlDocument()\r\n{\r\n    var doc = null;\r\n\r\n    if (document.implementation && document.implementation.createDocument)\r\n    {\r\n        doc = document.implementation.createDocument('', '', null);\r\n    }\r\n    else if (window.ActiveXObject)\r\n    {\r\n        doc = new ActiveXObject('Microsoft.XMLDOM');\r\n    }\r\n\r\n    return doc;\r\n};\r\n\r\nfunction decodeFromUri()\r\n{\r\n    try\r\n    {\r\n        document.getElementById('textarea').value = decodeURIComponent(document.getElementById('textarea').value)\r\n    }\r\n\tcatch (e)\r\n\t{\r\n\t\tconsole.log(e);\r\n\t\talert('decodeURIComponent failed: ' + e);\r\n    }\r\n};\r\n\r\nfunction getTextContent(node)\r\n{\r\n    return (node != null) ? node[(node.textContent === undefined) ? 'text' : 'textContent'] : '';\r\n};\r\n\r\nfunction xmlToString(xmlData) { \r\n\r\n    var xmlString;\r\n    //IE\r\n    if (window.ActiveXObject){\r\n        xmlString = xmlData.xml;\r\n    }\r\n    // code for Mozilla, Firefox, Opera, etc.\r\n    else{\r\n        xmlString = (new XMLSerializer()).serializeToString(xmlData);\r\n    }\r\n    return xmlString;\r\n}  \r\n\r\nfunction createMxGraphModel(imageData, width, height)\r\n{\r\n    let xmlString = \"<mxGraphModel></mxGraphModel>\"\r\n    try\r\n    {\r\n        var xmlDoc = parseXml(xmlString) //.documentElement;\r\n        var mxGraphModelNode = xmlDoc.documentElement //.getElementsByTagName(\"mxGraphModel\")[0]\r\n\t\tvar base64 = imageData.substring(imageData.indexOf(',') + 1);\r\n\r\n        // dx=\"480\" dy=\"550\" grid=\"1\" gridSize=\"10\" guides=\"1\" tooltips=\"1\" connect=\"1\" arrows=\"1\" \r\n        // fold=\"1\" page=\"1\" pageScale=\"1\" pageWidth=\"850\" pageHeight=\"1100\" background=\"#ffffff\" math=\"0\" shadow=\"0\"\r\n        if (mxGraphModelNode != null)\r\n        {\r\n            mxGraphModelNode.setAttribute(\"dx\", \"480\")\r\n            mxGraphModelNode.setAttribute(\"dy\", \"550\")\r\n            mxGraphModelNode.setAttribute(\"grid\", \"1\")\r\n            mxGraphModelNode.setAttribute(\"gridSize\", \"10\")\r\n            mxGraphModelNode.setAttribute(\"guides\", \"1\")\r\n            mxGraphModelNode.setAttribute(\"tooltips\", \"1\")\r\n            mxGraphModelNode.setAttribute(\"fold\", \"1\")\r\n            mxGraphModelNode.setAttribute(\"page\", \"1\")\r\n            mxGraphModelNode.setAttribute(\"pageScale\", \"1\")\r\n            mxGraphModelNode.setAttribute(\"pageWidth\", \"850\")\r\n            mxGraphModelNode.setAttribute(\"pageHeight\", \"1100\")\r\n            mxGraphModelNode.setAttribute(\"background\", \"#ffffff\")\r\n            mxGraphModelNode.setAttribute(\"math\", \"0\")\r\n            mxGraphModelNode.setAttribute(\"shadow\", \"0\")\r\n\r\n            let rootNode = xmlDoc.createElement(\"root\")\r\n            mxGraphModelNode.append(rootNode)\r\n\r\n            let mxCellNode = xmlDoc.createElement(\"mxCell\")\r\n            mxCellNode.setAttribute(\"id\", \"0\")\r\n            rootNode.append(mxCellNode)\r\n\r\n            let mxCellNode1 = xmlDoc.createElement(\"mxCell\")\r\n            mxCellNode1.setAttribute(\"id\", \"1\")\r\n            mxCellNode1.setAttribute(\"parent\", \"0\")\r\n            rootNode.append(mxCellNode1)\r\n\r\n            // mxCell id=\"2\" value=\"\" style=\"shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;\r\n            // verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png\r\n            let mxCellNode2 = xmlDoc.createElement(\"mxCell\")\r\n            rootNode.append(mxCellNode2)\r\n            mxCellNode2.setAttribute(\"id\", \"2\")\r\n            mxCellNode2.setAttribute(\"value\", \"\")\r\n            var styleValue = \"shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,\" + base64;\r\n            mxCellNode2.setAttribute(\"style\", styleValue)\r\n            mxCellNode2.setAttribute(\"parent\", \"1\")\r\n            mxCellNode2.setAttribute(\"vertex\", \"1\")\r\n            //<mxGeometry x=\"110\" y=\"90\" width=\"303\" height=\"304\" as=\"geometry\"/>\r\n            let mxGeometryNode = xmlDoc.createElement(\"mxGeometry\")\r\n            mxGeometryNode.setAttribute(\"x\", width/2)\r\n            mxGeometryNode.setAttribute(\"y\", height/2)\r\n            mxGeometryNode.setAttribute(\"width\", width)\r\n            mxGeometryNode.setAttribute(\"height\", height)\r\n            mxGeometryNode.setAttribute(\"as\", \"geometry\")\r\n            mxCellNode2.append(mxGeometryNode)\r\n\r\n            return xmlToString(mxGraphModelNode)\r\n        }\r\n    }\r\n    catch (e)\r\n    {\r\n        // ignore\r\n    }    \r\n}\r\n\r\nvar toolingUtils =\r\n{\r\n\t/**\r\n\t * Function: bind\r\n\t * \r\n\t * Returns a wrapper function that locks the execution scope of the given\r\n\t * function to the specified scope. Inside funct, the \"this\" keyword\r\n\t * becomes a reference to that scope.\r\n\t */\r\n\tbind: function(thisObject, funct)\r\n\t{\r\n\t\treturn function()\r\n\t\t{\r\n\t\t\treturn funct.apply(thisObject, arguments);\r\n\t\t};\r\n    }\r\n}\r\n    \r\nlet crcTable = [];\r\nfor (var n = 0; n < 256; n++)\r\n{\r\n    var c = n;\r\n    \r\n    for (var k = 0; k < 8; k++)\r\n    {\r\n        if ((c & 1) == 1)\r\n        {\r\n            c = 0xedb88320 ^ (c >>> 1);\r\n        }\r\n        else\r\n        {\r\n            c >>>= 1;\r\n        }\r\n\r\n        crcTable[n] = c;\r\n    }\r\n}\r\n\r\nvar updateCRC = function(crc, data, off, len)\r\n{\r\n    var c = crc;\r\n\r\n    for (var n = 0; n < len; n++)\r\n    {\r\n        c = crcTable[(c ^ data[off + n]) & 0xff] ^ (c >>> 8);\r\n    }\r\n\r\n    return c;\r\n};\r\n\r\n/**\r\n * Static method for pasing PNG files.\r\n */\r\nvar parsePng = function(f, fn, error)\r\n{\r\n\tvar pos = 0;\r\n\t\r\n\tfunction fread(d, count)\r\n\t{\r\n\t\tvar start = pos;\r\n\t\tpos += count;\r\n\t\t\r\n\t\treturn d.substring(start, pos);\r\n\t};\r\n\t\r\n\t// Reads unsigned long 32 bit big endian\r\n\tfunction _freadint(d)\r\n\t{\r\n\t\tvar bytes = fread(d, 4);\r\n\t\t\r\n\t\treturn bytes.charCodeAt(3) + (bytes.charCodeAt(2) << 8) +\r\n\t\t\t(bytes.charCodeAt(1) << 16) + (bytes.charCodeAt(0) << 24);\r\n\t};\r\n\t\r\n\t// Checks signature\r\n\tif (fread(f,8) != String.fromCharCode(137) + 'PNG' + String.fromCharCode(13, 10, 26, 10))\r\n\t{\r\n\t\tif (error != null)\r\n\t\t{\r\n\t\t\terror();\r\n\t\t}\r\n\t\t\r\n\t\treturn;\r\n\t}\r\n\t\r\n\t// Reads header chunk\r\n\tfread(f,4);\r\n\t\r\n\tif (fread(f,4) != 'IHDR')\r\n\t{\r\n\t\tif (error != null)\r\n\t\t{\r\n\t\t\terror();\r\n\t\t}\r\n\t\t\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tfread(f, 17);\r\n\t\r\n\tdo\r\n\t{\r\n\t\tvar n = _freadint(f);\r\n\t\tvar type = fread(f,4);\r\n\t\t\r\n\t\tif (fn != null)\r\n\t\t{\r\n\t\t\tif (fn(pos - 8, type, n))\r\n\t\t\t{\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvalue = fread(f,n);\r\n\t\tfread(f,4);\r\n\t\t\r\n\t\tif (type == 'IEND')\r\n\t\t{\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\twhile (n);\r\n};\r\n\r\n/**\r\n * Returns a base64 encoded version of the compressed string.\r\n */\r\nconst compress = function(data)\r\n{\r\n\tif (data == null || data.length == 0 || typeof(pako) === 'undefined')\r\n\t{\r\n\t\treturn data;\r\n\t}\r\n\telse\r\n\t{\r\n   \t\tvar tmp = bytesToString(pako.deflateRaw(encodeURIComponent(data)));\r\n   \t\t\r\n   \t\treturn (window.btoa) ? btoa(tmp) : Base64.encode(tmp, true);\r\n\t}\r\n};\r\n\r\n/**\r\n * Returns a decompressed version of the base64 encoded string.\r\n */\r\nconst decompress = function(data)\r\n{\r\n   \tif (data == null || data.length == 0 || typeof(pako) === 'undefined')\r\n\t{\r\n\t\treturn data;\r\n\t}\r\n\telse\r\n\t{\r\n\t\tvar tmp = (window.atob) ? atob(data) : Base64.decode(data, true);\r\n\t\t\r\n\t\treturn zapGremlins(decodeURIComponent(bytesToString(pako.inflateRaw(tmp))));\r\n\t}\r\n};\r\n\r\n/**\r\n * Removes all illegal control characters with ASCII code <32 except TAB, LF\r\n * and CR.\r\n */\r\nconst zapGremlins = function(text)\r\n{\r\n\tvar checked = [];\r\n\t\r\n\tfor (var i = 0; i < text.length; i++)\r\n\t{\r\n\t\tvar code = text.charCodeAt(i);\r\n\t\t\r\n\t\t// Removes all control chars except TAB, LF and CR\r\n\t\tif (code >= 32 || code == 9 || code == 10 || code == 13)\r\n\t\t{\r\n\t\t\tchecked.push(text.charAt(i));\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn checked.join('');\r\n};\r\n\r\n/**\r\n * Adds the given text to the compressed or non-compressed text chunk.\r\n */\r\nconst writeGraphModelToPng = function(data, type, key, value, error)\r\n{\r\n\tvar base64 = data.substring(data.indexOf(',') + 1);\r\n\tvar f = (window.atob) ? atob(base64) : Base64.decode(base64, true);\r\n\tvar pos = 0;\r\n\t\r\n\tfunction fread(d, count)\r\n\t{\r\n\t\tvar start = pos;\r\n\t\tpos += count;\r\n\t\t\r\n\t\treturn d.substring(start, pos);\r\n\t};\r\n\t\r\n\t// Reads unsigned long 32 bit big endian\r\n\tfunction _freadint(d)\r\n\t{\r\n\t\tvar bytes = fread(d, 4);\r\n\t\t\r\n\t\treturn bytes.charCodeAt(3) + (bytes.charCodeAt(2) << 8) +\r\n\t\t\t(bytes.charCodeAt(1) << 16) + (bytes.charCodeAt(0) << 24);\r\n\t};\r\n\t\r\n\tfunction writeInt(num)\r\n\t{\r\n\t\treturn String.fromCharCode((num >> 24) & 0x000000ff, (num >> 16) & 0x000000ff,\r\n\t\t\t(num >> 8) & 0x000000ff, num & 0x000000ff);\r\n\t};\r\n\t\r\n\t// Checks signature\r\n\tif (fread(f,8) != String.fromCharCode(137) + 'PNG' + String.fromCharCode(13, 10, 26, 10))\r\n\t{\r\n\t\tif (error != null)\r\n\t\t{\r\n\t\t\terror();\r\n\t\t}\r\n\t\t\r\n\t\treturn;\r\n\t}\r\n\t\r\n\t// Reads header chunk\r\n\tfread(f,4);\r\n\t\r\n\tif (fread(f,4) != 'IHDR')\r\n\t{\r\n\t\tif (error != null)\r\n\t\t{\r\n\t\t\terror();\r\n\t\t}\r\n\t\t\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tfread(f, 17);\r\n\tvar result = f.substring(0, pos);\r\n\t\r\n\tdo\r\n\t{\r\n\t\tvar n = _freadint(f);\r\n\t\tvar chunk = fread(f,4);\r\n\t\t\r\n\t\tif (chunk == 'IDAT')\r\n\t\t{\r\n\t\t\tresult = f.substring(0, pos - 8);\r\n\t\t\t\r\n\t\t\tvar chunkData = key + String.fromCharCode(0) +\r\n\t\t\t\t((type == 'zTXt') ? String.fromCharCode(0) : '') + \r\n\t\t\t\tvalue;\r\n\t\t\t\r\n\t\t\t// FIXME: Wrong crc\r\n\t\t\tvar crc = 0xffffffff;\r\n\t\t\tcrc = updateCRC(crc, type, 0, 4);\r\n\t\t\tcrc = updateCRC(crc, chunkData, 0, chunkData.length);\r\n\t\t\t\r\n\t\t\tresult += writeInt(chunkData.length) + type + chunkData + writeInt(crc ^ 0xffffffff);\r\n\t\t\tresult += f.substring(pos - 8, f.length);\r\n\t\t\t\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\tresult += f.substring(pos - 8, pos - 4 + n);\r\n\t\tfread(f,n);\r\n\t\tfread(f,4);\r\n\t}\r\n\twhile (n);\r\n\t\r\n\treturn 'data:image/png;base64,' + ((window.btoa) ? btoa(result) : Base64.encode(result, true));\r\n}\r\n\r\nvar toolingClient =\r\n{\r\n\t/**\r\n\t * Variable: IS_SF\r\n\t *\r\n\t * True if the current browser is Safari.\r\n\t */\r\n  \tIS_SF: navigator.userAgent.indexOf('AppleWebKit/') >= 0 &&\r\n  \t\tnavigator.userAgent.indexOf('Chrome/') < 0 &&\r\n          navigator.userAgent.indexOf('Edge/') < 0,\r\n}\r\n\r\n/**\r\n * Extracts the XML from the compressed or non-compressed text chunk.\r\n */\r\nconst extractGraphModelFromPng = function(data)\r\n{\r\n\tvar result = null;\r\n\t\r\n\ttry\r\n\t{\r\n\t\tvar base64 = data.substring(data.indexOf(',') + 1);\r\n\t\t// Workaround for invalid character error in Safari\r\n\t\tvar binary = (window.atob && !toolingClient.IS_SF) ? atob(base64) : Base64.decode(base64, true);\r\n\t\t\r\n\t\tparsePng(binary, toolingUtils.bind(this, function(pos, type, length)\r\n\t\t{\r\n\t\t\tvar value = binary.substring(pos + 8, pos + 8 + length);\r\n\t\t\t\r\n\t\t\tif (type == 'zTXt')\r\n\t\t\t{\r\n\t\t\t\tvar idx = value.indexOf(String.fromCharCode(0));\r\n\t\t\t\t\r\n\t\t\t\tif (value.substring(0, idx) == 'mxGraphModel')\r\n\t\t\t\t{\r\n\t\t\t\t\t// Workaround for Java URL Encoder using + for spaces, which isn't compatible with JS\r\n\t\t\t\t\tvar xmlData = bytesToString(pako.inflateRaw(\r\n\t\t\t\t\t\tvalue.substring(idx + 2))).replace(/\\+/g,' ');\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (xmlData != null && xmlData.length > 0)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tresult = xmlData;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// Uncompressed section is normally not used\r\n\t\t\telse if (type == 'tEXt')\r\n\t\t\t{\r\n\t\t\t\tvar vals = value.split(String.fromCharCode(0));\r\n\t\t\t\t\r\n\t\t\t\tif (vals.length > 1 && vals[0] == 'mxGraphModel')\r\n\t\t\t\t{\r\n\t\t\t\t\tresult = vals[1];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (result != null || type == 'IDAT')\r\n\t\t\t{\r\n\t\t\t\t// Stops processing the file as our text chunks\r\n\t\t\t\t// are always placed before the data section\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}));\r\n\t}\r\n\tcatch (e)\r\n\t{\r\n\t\t// ignores decoding errors\r\n\t}\r\n\t\r\n\tif (result != null && result.charAt(0) == '%')\r\n\t{\r\n\t\tresult = decodeURIComponent(result);\r\n\t}\r\n\t\r\n\t// Workaround for double encoded content\r\n\tif (result != null && result.charAt(0) == '%')\r\n\t{\r\n\t\tresult = decodeURIComponent(result);\r\n\t}\r\n\t\r\n\treturn result;\r\n};\r\n\r\nexport default {\r\n    compress,\r\n    createMxGraphModel,\r\n    extractGraphModelFromPng,\r\n    writeGraphModelToPng\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/utils.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('input',{attrs:{\"type\":\"file\",\"name\":_vm.$parent.name,\"id\":_vm.$parent.inputId || _vm.$parent.name,\"accept\":_vm.$parent.accept,\"webkitdirectory\":_vm.$parent.directory && _vm.$parent.features.directory,\"directory\":_vm.$parent.directory && _vm.$parent.features.directory,\"multiple\":_vm.$parent.multiple && _vm.$parent.features.html5},on:{\"change\":_vm.change}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-05cb692f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/InputFile.vue\n// module id = null\n// module chunks = ","<template>\n  <label :class=\"className\">\n    <slot></slot>\n    <input-file></input-file>\n  </label>\n</template>\n<style>\n.file-uploads {\n  overflow: hidden;\n  position: relative;\n  text-align: center;\n  display: inline-block;\n}\n.file-uploads.file-uploads-html4 input[type=\"file\"] {\n  opacity: 0;\n  font-size: 20em;\n  z-index: 1;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n.file-uploads.file-uploads-html5 input[type=\"file\"] {\n  overflow: hidden;\n  position: fixed;\n  width: 1px;\n  height: 1px;\n  z-index: -1;\n  opacity: 0;\n}\n</style>\n<script>\nimport InputFile from './InputFile.vue'\nexport default {\n  components: {\n    InputFile,\n  },\n  props: {\n    inputId: {\n      type: String,\n    },\n\n    name: {\n      type: String,\n      default: 'file',\n    },\n\n    accept: {\n      type: String,\n    },\n\n    multiple: {\n      type: Boolean,\n    },\n\n    maximum: {\n      type: Number,\n      default() {\n        return this.multiple ? 0 : 1\n      }\n    },\n\n    addIndex: {\n      type: [Boolean, Number],\n    },\n\n    directory: {\n      type: Boolean,\n    },\n\n    postAction: {\n      type: String,\n    },\n\n    putAction: {\n      type: String,\n    },\n\n    headers: {\n      type: Object,\n      default: Object,\n    },\n\n    data: {\n      type: Object,\n      default: Object,\n    },\n\n    timeout: {\n      type: Number,\n      default: 0,\n    },\n\n\n    drop: {\n      default: false,\n    },\n\n    dropDirectory: {\n      type: Boolean,\n      default: true,\n    },\n\n    size: {\n      type: Number,\n      default: 0,\n    },\n\n    extensions: {\n      default: Array,\n    },\n\n\n    value: {\n      type: Array,\n      default: Array,\n    },\n\n    thread: {\n      type: Number,\n      default: 1,\n    },\n  },\n\n  data() {\n    return {\n      files: this.value,\n      features: {\n        html5: true,\n        directory: false,\n        drag: false,\n      },\n\n      active: false,\n      dropActive: false,\n\n      uploading: 0,\n\n      destroy: false,\n    }\n  },\n\n\n  /**\n   * mounted\n   * @return {[type]} [description]\n   */\n  mounted() {\n    let input = document.createElement('input')\n    input.type = 'file'\n    input.multiple = true\n\n    // html5 特征\n    if (window.FormData && input.files) {\n      // 上传目录特征\n      if (typeof input.webkitdirectory === 'boolean' || typeof input.directory === 'boolean') {\n        this.features.directory = true\n      }\n\n      // 拖拽特征\n      if (this.features.html5 && typeof input.ondrop !== 'undefined') {\n        this.features.drop = true\n      }\n    } else {\n      this.features.html5 = false\n    }\n\n    // files 定位缓存\n    this.maps = {}\n\n    this.$nextTick(function () {\n\n      // 更新下父级\n      if (this.$parent) {\n        this.$parent.$forceUpdate()\n      }\n\n      // 拖拽渲染\n      this.watchDrop(this.drop)\n    })\n  },\n\n  /**\n   * beforeDestroy\n   * @return {[type]} [description]\n   */\n  beforeDestroy() {\n    // 已销毁\n    this.destroy = true\n\n    // 设置成不激活\n    this.active = false\n  },\n\n  computed: {\n    /**\n     * uploading 正在上传的线程\n     * @return {[type]} [description]\n     */\n\n    /**\n     * uploaded 文件列表是否全部已上传\n     * @return {[type]} [description]\n     */\n    uploaded() {\n      let file\n      for (let i = 0; i < this.files.length; i++) {\n        file = this.files[i]\n        if (file.fileObject && !file.error && !file.success) {\n          return false\n        }\n      }\n      return true\n    },\n\n\n    className() {\n      return [\n        'file-uploads',\n        this.features.html5 ? 'file-uploads-html5' : 'file-uploads-html4',\n        this.features.directory && this.directory ? 'file-uploads-directory' : undefined,\n        this.features.drop && this.drop ? 'file-uploads-drop' : undefined,\n      ]\n    }\n  },\n\n\n  watch: {\n    active(active) {\n      this.watchActive(active)\n    },\n\n    dropActive() {\n      if (this.$parent) {\n        this.$parent.$forceUpdate()\n      }\n    },\n\n    drop(value) {\n      this.watchDrop(value)\n    },\n\n    value(files) {\n      if (this.files === files) {\n        return\n      }\n      this.files = files\n\n      let oldMaps = this.maps\n\n      // 重写 maps 缓存\n      this.maps = {}\n      for (let i = 0; i < this.files.length; i++) {\n        let file = this.files[i]\n        this.maps[file.id] = file\n      }\n\n      // add, update\n      for (let key in this.maps) {\n        let newFile = this.maps[key]\n        let oldFile = oldMaps[key]\n        if (newFile !== oldFile) {\n          this.emitFile(newFile, oldFile)\n        }\n      }\n\n      // delete\n      for (let key in oldMaps) {\n        if (!this.maps[key]) {\n          this.emitFile(undefined, oldMaps[key])\n        }\n      }\n    },\n  },\n\n  methods: {\n\n    // 清空\n    clear() {\n      if (this.files.length) {\n        let files = this.files\n        this.files = []\n\n        // 定位\n        this.maps = {}\n\n        // 事件\n        this.emitInput()\n        for (let i = 0; i < files.length; i++) {\n          this.emitFile(undefined, files[i])\n        }\n      }\n      return true\n    },\n\n    // 选择\n    get(id) {\n      if (!id) {\n        return false\n      }\n\n      if (typeof id === 'object') {\n        return this.maps[id.id] || false\n      }\n\n      return this.maps[id] || false\n    },\n\n    // 添加\n    add(_files, index = this.addIndex) {\n      let files = _files\n      let isArray = files instanceof Array\n\n      // 不是数组整理成数组\n      if (!isArray) {\n        files = [files]\n      }\n\n      // 遍历规范对象\n      let addFiles = []\n      for (let i = 0; i < files.length; i++) {\n        let file = files[i]\n        if (this.features.html5 && file instanceof Blob) {\n          file = {\n            file,\n            size: file.size,\n            name: file.webkitRelativePath || file.relativePath || file.name || 'unknown',\n            type: file.type,\n          }\n        }\n        let fileObject = false\n        if (file.fileObject === false) {\n          // false\n        } else if (file.fileObject) {\n          fileObject = true\n        } else if (typeof Element !== 'undefined' && file.el instanceof Element) {\n          fileObject = true\n        } else if (typeof Blob !== 'undefined' && file.file instanceof Blob) {\n          fileObject = true\n        }\n        if (fileObject) {\n          file = {\n            fileObject: true,\n            size: -1,\n            name: 'Filename',\n            type: '',\n            active: false,\n            error: '',\n            success: false,\n            putAction: this.putAction,\n            postAction: this.postAction,\n            timeout: this.timeout,\n            ...file,\n            response: {},\n\n            progress: '0.00',          // 只读\n            speed: 0,                  // 只读\n            // xhr: false,                // 只读\n            // iframe: false,             // 只读\n          }\n\n          file.data = {\n            ...this.data,\n            ...file.data ? file.data : {},\n          }\n\n          file.headers = {\n            ...this.headers,\n            ...file.headers ? file.headers : {},\n          }\n        }\n\n        // 必须包含 id\n        if (!file.id) {\n          file.id = Math.random().toString(36).substr(2)\n        }\n\n        if (this.emitFilter(file, undefined)) {\n          continue\n        }\n\n        // 最大数量限制\n        if (this.maximum > 1 && (addFiles.length + this.files.length) >= this.maximum) {\n          break\n        }\n\n        addFiles.push(file)\n\n        // 最大数量限制\n        if (this.maximum === 1) {\n          break\n        }\n      }\n\n      // 没有文件\n      if (!addFiles.length) {\n        return false\n      }\n\n      // 如果是 1 清空\n      if (this.maximum === 1) {\n        this.clear()\n      }\n\n\n      // 添加进去 files\n      let newFiles\n      if (index === true || index === 0) {\n        newFiles = addFiles.concat(this.files)\n      } else if (index) {\n        newFiles = addFiles.concat([])\n        newFiles.splice(index, 0, addFiles)\n      } else {\n        newFiles = this.files.concat(addFiles)\n      }\n\n      this.files = newFiles\n\n      // 定位\n      for (let i = 0; i < addFiles.length; i++) {\n        let file = addFiles[i]\n        this.maps[file.id] = file\n      }\n\n      // 事件\n      this.emitInput()\n      for (let i = 0; i < addFiles.length; i++) {\n        this.emitFile(addFiles[i], undefined)\n      }\n\n      return isArray ? addFiles : addFiles[0]\n    },\n\n\n\n    // 添加表单文件\n    addInputFile(el) {\n      let files = []\n      if (el.files) {\n        for (let i = 0; i < el.files.length; i++) {\n          let file = el.files[i]\n          files.push({\n            size: file.size,\n            name: file.webkitRelativePath || file.relativePath || file.name,\n            type: file.type,\n            file,\n            el\n          })\n        }\n      } else {\n        files.push({\n          name: el.value.replace(/^.*?([^\\/\\\\\\r\\n]+)$/, '$1'),\n          el,\n        })\n      }\n      return this.add(files)\n    },\n\n\n    // 添加 DataTransfer\n    addDataTransfer(dataTransfer) {\n      let files = []\n      if (dataTransfer.items && dataTransfer.items.length) {\n        let items = []\n        for (let i = 0; i < dataTransfer.items.length; i++) {\n          let item = dataTransfer.items[i]\n          if (item.getAsEntry) {\n            item = item.getAsEntry() || item.getAsFile()\n          } else if (item.webkitGetAsEntry) {\n            item = item.webkitGetAsEntry() || item.getAsFile()\n          } else {\n            item = item.getAsFile()\n          }\n          if (item) {\n            items.push(item)\n          }\n        }\n\n        return new Promise((resolve, reject) => {\n          let forEach = (i) => {\n            let item = items[i]\n            // 结束 文件数量大于 最大数量\n            if (!item || (this.maximum > 0 && files.length >= this.maximum)) {\n              return resolve(this.add(files))\n            }\n            this.getEntry(item).then(function (results) {\n              files.push(...results)\n              forEach(i + 1)\n            })\n          }\n          forEach(0)\n        })\n      }\n\n      if (dataTransfer.files.length) {\n        for (let i = 0; i < dataTransfer.files.length; i++) {\n          files.push(dataTransfer.files[i])\n          if (this.maximum > 0 && files.length >= this.maximum) {\n            break\n          }\n        }\n        return Promise.resolve(this.add(files))\n      }\n\n      return Promise.resolve([])\n    },\n\n\n    // 获得 entry\n    getEntry(entry, path = '') {\n      return new Promise((resolve, reject) => {\n        if (entry.isFile) {\n          entry.file(function (file) {\n            resolve([\n              {\n                size: file.size,\n                name: path + file.name,\n                type: file.type,\n                file,\n              }\n            ])\n          })\n        } else if (entry.isDirectory && this.dropDirectory) {\n          let files = []\n          let dirReader = entry.createReader()\n          let readEntries = () => {\n            dirReader.readEntries((entries) => {\n              let forEach = (i) => {\n                if ((!entries[i] && i === 0) || (this.maximum > 0 && files.length >= this.maximum)) {\n                  return resolve(files)\n                }\n                if (!entries[i]) {\n                  return readEntries()\n                }\n                this.getEntry(entries[i], path + entry.name + '/').then((results) => {\n                  files.push(...results)\n                  forEach(i + 1)\n                })\n              }\n              forEach(0)\n            })\n          }\n          readEntries()\n        } else {\n          resolve([])\n        }\n      })\n    },\n\n\n    replace(id1, id2) {\n      let file1 = this.get(id1)\n      let file2 = this.get(id2)\n      if (!file1 || !file2 || file1 === file2) {\n        return false\n      }\n      let files = this.files.concat([])\n      let index1 = files.indexOf(file1)\n      let index2 = files.indexOf(file2)\n      if (index1 === -1 || index2 === -1) {\n        return false\n      }\n      files[index1] = file2\n      files[index2] = file1\n      this.files = files\n      this.emitInput()\n      return true\n    },\n\n    // 移除\n    remove(id) {\n      let file = this.get(id)\n      if (file) {\n        if (this.emitFilter(undefined, file)) {\n          return false\n        }\n        let files = this.files.concat([])\n        let index = files.indexOf(file)\n        if (index === -1) {\n          console.error('remove', file)\n          return false\n        }\n        files.splice(index, 1)\n        this.files = files\n\n        // 定位\n        delete this.maps[file.id]\n\n        // 事件\n        this.emitInput()\n        this.emitFile(undefined, file)\n      }\n      return file\n    },\n\n    // 更新\n    update(id, data) {\n      let file = this.get(id)\n      if (file) {\n        let newFile = {\n          ...file,\n          ...data\n        }\n        // 停用必须加上错误\n        if (file.fileObject && file.active && !newFile.active && !newFile.error && !newFile.success) {\n          newFile.error = 'abort'\n        }\n\n        if (this.emitFilter(newFile, file)) {\n          return false\n        }\n\n        let files = this.files.concat([])\n        let index = files.indexOf(file)\n        if (index === -1) {\n          console.error('update', file)\n          return false\n        }\n        files.splice(index, 1, newFile)\n        this.files = files\n\n        // 删除  旧定位 写入 新定位 （已便支持修改id)\n        delete this.maps[file.id]\n        this.maps[newFile.id] = newFile\n\n        // 事件\n        this.emitInput()\n        this.emitFile(newFile, file)\n        return newFile\n      }\n      return false\n    },\n\n\n\n    // 预处理 事件 过滤器\n    emitFilter(newFile, oldFile) {\n      let isPrevent = false\n      this.$emit('input-filter', newFile, oldFile, function () {\n        isPrevent = true\n        return isPrevent\n      })\n      return isPrevent\n    },\n\n    // 处理后 事件 分发\n    emitFile(newFile, oldFile) {\n      this.$emit('input-file', newFile, oldFile)\n      if (newFile && newFile.fileObject && newFile.active && (!oldFile || !oldFile.active)) {\n        this.uploading++\n        // 激活\n        this.$nextTick(function () {\n          setTimeout(() => {\n            this.upload(newFile).then(() => {\n              // eslint-disable-next-line\n              newFile = this.get(newFile)\n              if (newFile && newFile.fileObject) {\n                this.update(newFile, {\n                  active: false,\n                  success: !newFile.error\n                })\n              }\n            }).catch((e) => {\n              this.update(newFile, {\n                active: false,\n                success: false,\n                error: e.code || e.error || e.message || e\n              })\n            })\n          }, parseInt(Math.random() * 50 + 50, 10))\n        })\n      } else if ((!newFile || !newFile.fileObject || !newFile.active) && oldFile && oldFile.fileObject && oldFile.active) {\n        // 停止\n        this.uploading--\n      }\n\n      // 自动延续激活\n      if (this.active && (Boolean(newFile) !== Boolean(oldFile) || newFile.active !== oldFile.active)) {\n        this.watchActive(true)\n      }\n    },\n\n    emitInput() {\n      this.$emit('input', this.files)\n    },\n\n\n    // 上传\n    upload(id) {\n      let file = this.get(id)\n\n      // 被删除\n      if (!file) {\n        return Promise.reject('not_exists')\n      }\n\n      // 不是文件对象\n      if (!file.fileObject) {\n        return Promise.reject('file_object')\n      }\n\n      // 有错误直接响应\n      if (file.error) {\n        return Promise.reject(file.error)\n      }\n\n      // 已完成直接响应\n      if (file.success) {\n        return Promise.resolve(file)\n      }\n\n      // 后缀\n      let extensions = this.extensions\n      if (extensions && (extensions.length || typeof extensions.length === 'undefined')) {\n        if (typeof extensions !== 'object' || !(extensions instanceof RegExp)) {\n          if (typeof extensions === 'string') {\n            extensions = extensions.split(',').map(value => value.trim()).filter(value => value)\n          }\n          extensions = new RegExp('\\\\.(' + extensions.join('|').replace(/\\./g, '\\\\.') + ')$', 'i')\n        }\n        if (file.name.search(extensions) === -1) {\n          return Promise.reject('extension')\n        }\n      }\n\n      // 大小\n      if (this.size > 0 && file.size >= 0 && file.size > this.size) {\n        return Promise.reject('size')\n      }\n\n\n      if (this.features.html5 && file.putAction) {\n        return this.uploadPut(file)\n      } else if (this.features.html5) {\n        return this.uploadHtml5(file)\n      } else {\n        return this.uploadHtml4(file)\n      }\n    },\n\n    uploadPut(file) {\n      let querys = []\n      let value\n      for (let key in file.data) {\n        value = file.data[key]\n        if (value !== null && value !== undefined) {\n          querys.push(encodeURIComponent(key) + '=' + encodeURIComponent(value))\n        }\n      }\n      let queryString = querys.length ? (file.putAction.indexOf('?') === -1 ? '?' : '&') + querys.join('&') : ''\n      let xhr = new XMLHttpRequest()\n      xhr.open('PUT', file.putAction + queryString)\n      return this.uploadXhr(xhr, file, file.file)\n    },\n\n    uploadHtml5(file) {\n      let form = new window.FormData()\n      let value\n      for (let key in file.data) {\n        value = file.data[key]\n        if (value && typeof value === 'object' && typeof value.toString !== 'function') {\n          if (value instanceof File) {\n            form.append(key, value, value.name)\n          } else {\n            form.append(key, JSON.stringify(value))\n          }\n        } else if (value !== null && value !== undefined) {\n          form.append(key, value)\n        }\n      }\n      form.append(this.name, file.file, file.file.filename || file.name)\n      let xhr = new XMLHttpRequest()\n      xhr.open('POST', file.postAction)\n      return this.uploadXhr(xhr, file, form)\n    },\n\n    uploadXhr(xhr, _file, body) {\n      let file = _file\n      let speedTime = 0\n      let speedLoaded = 0\n\n      // 进度条\n      xhr.upload.onprogress = (e) => {\n        // 还未开始上传 已删除 未激活\n        file = this.get(file)\n        if (!e.lengthComputable || !file || !file.fileObject || !file.active) {\n          return\n        }\n\n        // 进度 速度 每秒更新一次\n        let speedTime2 = Math.round(Date.now() / 1000)\n        if (speedTime2 === speedTime) {\n          return\n        }\n        speedTime = speedTime2\n\n        file = this.update(file, {\n          progress: (e.loaded / e.total * 100).toFixed(2),\n          speed: e.loaded - speedLoaded,\n        })\n        speedLoaded = e.loaded\n      }\n\n      // 检查激活状态\n      let interval = setInterval(() => {\n        file = this.get(file)\n        if (file && file.fileObject && !file.success && !file.error && file.active) {\n          return\n        }\n\n        if (interval) {\n          clearInterval(interval)\n          interval = false\n        }\n\n        try {\n          xhr.abort()\n          xhr.timeout = 1\n        } catch (e) {\n        }\n      }, 100)\n\n      return new Promise((resolve, reject) => {\n        let complete\n        let fn = (e) => {\n          // 已经处理过了\n          if (complete) {\n            return\n          }\n          complete = true\n          if (interval) {\n            clearInterval(interval)\n            interval = false\n          }\n\n          file = this.get(file)\n\n          // 不存在直接响应\n          if (!file) {\n            return reject('not_exists')\n          }\n\n          // 不是文件对象\n          if (!file.fileObject) {\n            return reject('file_object')\n          }\n\n          // 有错误自动响应\n          if (file.error) {\n            return reject(file.error)\n          }\n\n          // 未激活\n          if (!file.active) {\n            return reject('abort')\n          }\n\n\n          // 已完成 直接相应\n          if (file.success) {\n            return resolve(file)\n          }\n\n          let data = {}\n\n          switch (e.type) {\n            case 'timeout':\n            case 'abort':\n              data.error = e.type\n              break\n            case 'error':\n              if (!xhr.status) {\n                data.error = 'network'\n              } else if (xhr.status >= 500) {\n                data.error = 'server'\n              } else if (xhr.status >= 400) {\n                data.error = 'denied'\n              }\n              break\n            default:\n              if (xhr.status >= 500) {\n                data.error = 'server'\n              } else if (xhr.status >= 400) {\n                data.error = 'denied'\n              } else {\n                data.progress = '100.00'\n              }\n          }\n\n          if (xhr.responseText) {\n            let contentType = xhr.getResponseHeader('Content-Type')\n            if (contentType && contentType.indexOf('/json') !== -1) {\n              data.response = JSON.parse(xhr.responseText)\n            } else {\n              data.response = xhr.responseText\n            }\n          }\n\n          // 更新\n          file = this.update(file, data)\n\n          // 相应错误\n          if (file.error) {\n            return reject(file.error)\n          }\n\n          // 响应\n          return resolve(file)\n        }\n\n        // 事件\n        xhr.onload = fn\n        xhr.onerror = fn\n        xhr.onabort = fn\n        xhr.ontimeout = fn\n\n        // 超时\n        if (file.timeout) {\n          xhr.timeout = file.timeout\n        }\n\n        // headers\n        for (let key in file.headers) {\n          xhr.setRequestHeader(key, file.headers[key])\n        }\n\n        // 更新 xhr\n        file = this.update(file, { xhr })\n\n        // 开始上传\n        xhr.send(body)\n      })\n    },\n\n\n\n\n    uploadHtml4(_file) {\n      let file = _file\n      let onKeydown = function (e) {\n        if (e.keyCode === 27) {\n          e.preventDefault()\n        }\n      }\n\n      let iframe = document.createElement('iframe')\n      iframe.id = 'upload-iframe-' + file.id\n      iframe.name = 'upload-iframe-' + file.id\n      iframe.src = 'about:blank'\n      iframe.setAttribute('style', 'width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;')\n\n\n      let form = document.createElement('form')\n\n      form.action = file.postAction\n\n      form.name = 'upload-form-' + file.id\n\n\n      form.setAttribute('method', 'POST')\n      form.setAttribute('target', 'upload-iframe-' + file.id)\n      form.setAttribute('enctype', 'multipart/form-data')\n\n      let value\n      let input\n      for (let key in file.data) {\n        value = file.data[key]\n        if (value && typeof value === 'object' && typeof value.toString !== 'function') {\n          value = JSON.stringify(value)\n        }\n        if (value !== null && value !== undefined) {\n          input = document.createElement('input')\n          input.type = 'hidden'\n          input.name = key\n          input.value = value\n          form.appendChild(input)\n        }\n      }\n      form.appendChild(file.el)\n\n      document.body.appendChild(iframe).appendChild(form)\n\n\n\n\n      let getResponseData = function () {\n        let doc\n        try {\n          if (iframe.contentWindow) {\n            doc = iframe.contentWindow.document\n          }\n        } catch (err) {\n        }\n        if (!doc) {\n          try {\n            doc = iframe.contentDocument ? iframe.contentDocument : iframe.document\n          } catch (err) {\n            doc = iframe.document\n          }\n        }\n        if (doc && doc.body) {\n          return doc.body.innerHTML\n        }\n        return null\n      }\n\n\n      return new Promise((resolve, reject) => {\n        setTimeout(() => {\n          file = this.update(file, { iframe })\n\n          // 不存在\n          if (!file) {\n            return reject('not_exists')\n          }\n\n          // 定时检查\n          let interval = setInterval(() => {\n            file = this.get(file)\n            if (file && file.fileObject && !file.success && !file.error && file.active) {\n              return\n            }\n\n            if (interval) {\n              clearInterval(interval)\n              interval = false\n            }\n\n            iframe.onabort({ type: file ? 'abort' : 'not_exists' })\n          }, 100)\n\n\n          let complete\n          let fn = (e) => {\n            // 已经处理过了\n            if (complete) {\n              return\n            }\n            complete = true\n\n\n            if (interval) {\n              clearInterval(interval)\n              interval = false\n            }\n\n            // 关闭 esc 事件\n            document.body.removeEventListener('keydown', onKeydown)\n\n            file = this.get(file)\n\n            // 不存在直接响应\n            if (!file) {\n              return reject('not_exists')\n            }\n\n            // 不是文件对象\n            if (!file.fileObject) {\n              return reject('file_object')\n            }\n\n            // 有错误自动响应\n            if (file.error) {\n              return reject(file.error)\n            }\n\n            // 未激活\n            if (!file.active) {\n              return reject('abort')\n            }\n\n            // 已完成 直接相应\n            if (file.success) {\n              return resolve(file)\n            }\n\n            let response = getResponseData()\n            let data = {}\n            switch (e.type) {\n              case 'abort':\n                data.error = 'abort'\n                break\n              case 'error':\n                if (file.error) {\n                  data.error = file.error\n                } else if (response === null) {\n                  data.error = 'network'\n                } else {\n                  data.error = 'denied'\n                }\n                break\n              default:\n                if (file.error) {\n                  data.error = file.error\n                } else if (data === null) {\n                  data.error = 'network'\n                } else {\n                  data.progress = '100.00'\n                }\n            }\n\n            if (response !== null) {\n              if (response && response.substr(0, 1) === '{' && response.substr(response.length - 1, 1) === '}') {\n                try {\n                  response = JSON.parse(response)\n                } catch (err) {\n                }\n              }\n              data.response = response\n            }\n\n            // 更新\n            file = this.update(file, data)\n\n            if (file.error) {\n              return reject(file.error)\n            }\n\n            // 响应\n            return resolve(file)\n          }\n\n\n          // 添加事件\n          iframe.onload = fn\n          iframe.onerror = fn\n          iframe.onabort = fn\n\n\n          // 禁止 esc 键\n          document.body.addEventListener('keydown', onKeydown)\n\n          // 提交\n          form.submit()\n        }, 50)\n      }).then(function (res) {\n        iframe.parentNode && iframe.parentNode.removeChild(iframe)\n        return res\n      }).catch(function (res) {\n        iframe.parentNode && iframe.parentNode.removeChild(iframe)\n        return res\n      })\n    },\n\n\n\n    watchActive(active) {\n      let file\n      let index = 0\n      while ((file = this.files[index])) {\n        index++\n        if (!file.fileObject) {\n          // 不是文件对象\n        } else if (active && !this.destroy) {\n          if (this.uploading >= this.thread || (this.uploading && !this.features.html5)) {\n            break\n          }\n          if (!file.active && !file.error && !file.success) {\n            this.update(file, { active: true })\n          }\n        } else {\n          if (file.active) {\n            this.update(file, { active: false })\n          }\n        }\n      }\n      if (this.uploading === 0) {\n        this.active = false\n      }\n    },\n\n\n    watchDrop(_el) {\n      let el = _el\n      if (!this.features.drop) {\n        return\n      }\n\n      // 移除挂载\n      if (this.dropElement) {\n        try {\n          document.removeEventListener('dragenter', this.onDragenter, false)\n          document.removeEventListener('dragleave', this.onDragleave, false)\n          document.removeEventListener('drop', this.onDocumentDrop, false)\n          this.dropElement.removeEventListener('dragover', this.onDragover, false)\n          this.dropElement.removeEventListener('drop', this.onDrop, false)\n        } catch (e) {\n        }\n      }\n\n      if (!el) {\n        el = false\n      } else if (typeof el === 'string') {\n        el = document.querySelector(el) || this.$root.$el.querySelector(el)\n      } else if (el === true) {\n        el = this.$parent.$el\n      }\n\n      this.dropElement = el\n\n      if (this.dropElement) {\n        document.addEventListener('dragenter', this.onDragenter, false)\n        document.addEventListener('dragleave', this.onDragleave, false)\n        document.addEventListener('drop', this.onDocumentDrop, false)\n        this.dropElement.addEventListener('dragover', this.onDragover, false)\n        this.dropElement.addEventListener('drop', this.onDrop, false)\n      }\n    },\n\n\n    onDragenter(e) {\n      e.preventDefault()\n      if (!this.dropActive) {\n        this.dropActive = true\n      }\n    },\n\n    onDragleave(e) {\n      e.preventDefault()\n      if (e.target.nodeName === 'HTML' || (e.screenX === 0 && e.screenY === 0 && !e.fromElement && e.offsetX <= 0)) {\n        this.dropActive = false\n      }\n    },\n\n    onDragover(e) {\n      e.preventDefault()\n    },\n\n    onDocumentDrop() {\n      this.dropActive = false\n    },\n\n    onDrop(e) {\n      e.preventDefault()\n      this.addDataTransfer(e.dataTransfer)\n    },\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/FileUpload.vue","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./InputFile.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./InputFile.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-05cb692f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./InputFile.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/InputFile.vue\n// module id = null\n// module chunks = ","<template>\n  <input\n    type=\"file\"\n    :name=\"$parent.name\"\n    :id=\"$parent.inputId || $parent.name\"\n    :accept=\"$parent.accept\"\n    @change=\"change\"\n    :webkitdirectory=\"$parent.directory && $parent.features.directory\"\n    :directory=\"$parent.directory && $parent.features.directory\"\n    :multiple=\"$parent.multiple && $parent.features.html5\"\n  />\n</template>\n<script>\nexport default {\n  methods: {\n    change(e) {\n      this.$destroy()\n      this.$parent.addInputFile(e.target)\n      // eslint-disable-next-line\n      new this.constructor({\n        parent: this.$parent,\n        el: this.$el,\n      })\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/InputFile.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{class:_vm.className},[_vm._t(\"default\"),_vm._v(\" \"),_c('input-file')],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0841660b\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/FileUpload.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0841660b\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./FileUpload.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./FileUpload.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./FileUpload.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0841660b\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./FileUpload.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/FileUpload.vue\n// module id = null\n// module chunks = ","<template>\r\n    <div \r\n      id=\"iframe-wrapper\"\r\n      :style=\"iframe.wrapperStyle\" \r\n    >\r\n      <iframe \r\n        v-if=\"loaded\"\r\n        :src=\"url\"\r\n        :style=\"iframe.style\"\r\n        :height=\"iframe.style.height\"\r\n        :width=\"iframe.style.width\"\r\n        frameborder=\"0\"\r\n      ></iframe>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'drawio-frame', \r\n  data () {\r\n    return {\r\n      loaded: false,\r\n      iframe: {\r\n        src: window.location.href,\r\n        style: null,\r\n        wrapperStyle: null,\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    let editor = this.$refs.editor;\r\n    this.iframe.style = {\r\n        border:0,\r\n        position:fixed,\r\n        top:0,\r\n        left:0,\r\n        right:0,\r\n        bottom:0,\r\n        width: '100%',\r\n        height: '100%'\r\n    }    \r\n    this.iframe.wrapperStyle = {\r\n      overflow: 'hidden',\r\n      height: '100%', //editor.clientHeight + \"px\",\r\n      width: '100%' //editor.clientWidth + \"px\",\r\n    } \r\n    this.loaded = true;\r\n  },  \r\n  props: {\r\n    url: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  methods: {\r\n    loadIframe: function () {\r\n      console.log(\"Iframe.......\", this.url, this.frame, this.type);\r\n      var iframe = document.getElementById(this.frame);\r\n      iframe.src = this.url;\r\n      iframe.onload = function () {\r\n        // console.log(\"iframe cargado...\")\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/drawio_iframe.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{style:(_vm.iframe.wrapperStyle),attrs:{\"id\":\"iframe-wrapper\"}},[(_vm.loaded)?_c('iframe',{style:(_vm.iframe.style),attrs:{\"src\":_vm.url,\"height\":_vm.iframe.style.height,\"width\":_vm.iframe.style.width,\"frameborder\":\"0\"}}):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2a40fcf8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/drawio_iframe.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./drawio_iframe.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./drawio_iframe.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2a40fcf8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./drawio_iframe.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/drawio_iframe.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"image-convert\">\n    <div v-show=\"$refs.upload && $refs.upload.dropActive\" class=\"drop-active\">\n      <h3>Drop files to upload</h3>\n    </div>\n    <div class=\"image-upload\"  v-show=\"!edit\">\n      <div class=\"text-center\">\n        <label for=\"image\">\n          <div class=\"rounded\">\n          <img :src=\"files.length ? files[0].url : 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D'\" />\n          </div>\n          <h4 class=\"pt-2\">Drop file anywhere to edit</h4>\n          <h5 class=\"pt-2\">or</h5>\n        </label>\n      </div>\n      <div class=\"text-center p-2\">\n        <file-upload\n          extensions=\"gif,jpg,jpeg,png,svg\"\n          accept=\"image/png,image/gif,image/jpeg, image/svg+xml\"\n          name=\"image\"\n          class=\"btn btn-primary\"\n          post-action=\"/upload/post\"\n          :drop=\"!edit\"\n          v-model=\"files\"\n          @input-filter=\"inputFilter\"\n          @input-file=\"inputFile\"\n          ref=\"upload\">\n          Select Image\n        </file-upload>\n      </div>\n    </div>\n\n    <div class=\"image-edit\" v-show=\"files.length && edit\">\n      <div class=\"image-edit-image\" v-if=\"files.length\">\n        <img ref=\"editImage\" :src=\"imageData ? imageData : files[0].url\" />\n      </div>\n      <div class=\"text-center p-4\">\n        <button type=\"button\" class=\"btn btn-primary\" @click.prevent=\"editInDrawio\">Edit</button>        \n        <button type=\"submit\" class=\"btn btn-primary\" @click.prevent=\"editSave\">Save</button>\n        <button type=\"button\" class=\"btn btn-secondary\" @click.prevent=\"reset\">Cancel</button>\n      </div>\n    </div>\n  </div>\n</template>\n<style scoped>\n.image-convert .image-upload .rounded {\n  width: 400px;\n  height: 300px;\n  background-color: #b9b8b6;\n  background-repeat: no-repeat\n}\n.image-convert .text-center .btn {\n  margin: 0 .5rem\n}\n.image-convert .image-edit-image {\n  max-width: 100%\n}\n.image-convert .drop-active {\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  position: fixed;\n  z-index: 9999;\n  opacity: .6;\n  text-align: center;\n  background: #000;\n}\n.image-convert .drop-active h3 {\n  margin: -.5em 0 0;\n  position: absolute;\n  top: 50%;\n  left: 0;\n  right: 0;\n  -webkit-transform: translateY(-50%);\n  -ms-transform: translateY(-50%);\n  transform: translateY(-50%);\n  font-size: 40px;\n  color: #fff;\n  padding: 0;\n}\n</style>\n\n\n<script>\nimport Vue from 'vue'\nimport Utils from './utils.js'\nimport FileUpload from './FileUpload.vue'\nimport DrawioIFrame from './drawio_iframe.vue'\n\nVue.component('drawio-iframe',DrawioIFrame)\nexport default {\n  components: {\n    FileUpload,\n    DrawioIFrame\n  },\n  data() {\n    return {\n      imageData: null,\n      files: [],\n      edit: false,\n      drawio_url: '',\n      drawIoWindow: null,\n      isXmlSvg: false\n    }\n  },\n  watch: {\n    edit(value) {\n      if (value) {\n        this.$nextTick(function () {\n          if (!this.$refs.editImage) {\n            return\n          }\n        })\n      } \n    }\n  },\n  methods: {\n    reset () {\n      this.$refs.upload.clear()\n      this.edit = false\n      this.files.length = 0\n      this.imageData = null\n    },\n    insertModelInPng () {\n      let self = this\n      let modelXml = Utils.extractGraphModelFromPng(self.imageData)\n      if (!modelXml) {\n        let width = self.$refs.editImage.naturalWidth\n        let height = self.$refs.editImage.naturalHeight\n        modelXml = Utils.createMxGraphModel(self.imageData, width, height)\n        if (modelXml) {\n           // console.log(modelXml)\n \t         this.imageData = Utils.writeGraphModelToPng(self.imageData, 'zTXt', 'mxGraphModel',\n                         atob(Utils.compress(modelXml)));\t\n        }\n      }      \n    },\n    editInDrawio ()\n    {\n      var url = 'https://www.draw.io/?embed=1&ui=atlas&spin=1&modified=unsavedChanges&proto=json';\n      let drawIoWindow = this.drawIoWindow\n      let self = this\n\n      if (!self.isXmlSvg) {\n        this.insertModelInPng()\n      }\n      /*\n        let width = self.$refs.editImage.naturalWidth\n        let height = self.$refs.editImage.naturalHeight\n        let modelXml = Utils.createMxGraphModel(self.imageData, width, height)\n        if (modelXml) {\n           console.log(modelXml)\n           modelXml = encodeURIComponent(modelXml)\n        }\n      */\n      if (drawIoWindow == null || drawIoWindow.closed)\n      {\n        // Implements protocol for loading and exporting with embedded XML\n        var receive = function(evt)\n        {\n          if (evt.data.length > 0 && evt.source == drawIoWindow)\n          {\n            var msg = JSON.parse(evt.data);\n \n            // Received if the editor is ready\n            if (msg.event == 'init')\n            {\n              // Sends the data URI with embedded XML to editor\n              if (self.isXmlSvg) {\n                drawIoWindow.postMessage(JSON.stringify(\n                  {action: 'load', xml: self.imageData}), '*');\n              }\n              else {\n                drawIoWindow.postMessage(JSON.stringify(\n                  {action: 'load', xmlpng: self.imageData}), '*');\n              }\n            }\n            // Received if the user clicks save\n            else if (msg.event == 'save')\n            {\n              // Sends a request to export the diagram as XML with embedded PNG\n              drawIoWindow.postMessage(JSON.stringify(\n                {action: 'export', format: 'xmlsvg', spinKey: 'saving'}), '*');\n            }\n            // Received if the export request was processed\n            else if (msg.event == 'export')\n            {\n              // Updates the data URI of the image\n              // self.$refs.editImage.setAttribute('src', msg.data);\n              if (msg.data) {\n                self.imageData = msg.data\n                self.isXmlSvg = true\n              }\n            }\n                         \n            // Received if the user clicks exit or after export\n            if (msg.event == 'exit' || msg.event == 'export')\n            {\n              // Closes the editor\n              window.removeEventListener('message', receive);\n              drawIoWindow.close();\n              self.drawIoWindow = null;\n            }\n          }\n        };\n \n        // Opens the editor\n        window.addEventListener('message', receive);\n        drawIoWindow = window.open(url);\n        self.drawIoWindow = drawIoWindow\n      }\n      else\n      {\n        // Shows existing editor window\n        drawIoWindow.focus();\n      }\n    },\n    editImage () {\n    },\n    downloadFile (filename) {\n      if (!this.isXmlSvg) {\n        alert('No SVG data')\n        return\n      }\n\n      /*\n      // create link to force download\n      link = $('<a>');\n      link.attr({\n        href: this.imageData,\n        // window.URL.createObjectURL(blob), // eslint-disable-line no-undef\n        download: filename\n      });\n      document.body.appendChild(link[0]); // eslint-disable-line no-undef\n      // trigger download dialog\n      link[0].click();\n      */\n      \n      var pom = document.createElement('a');\n      pom.setAttribute('href', this.imageData) //'image/svg+xml;charset=utf-8,' + encodeURIComponent(text));\n      pom.setAttribute('download', filename);\n\n      if (document.createEvent) {\n        var event = document.createEvent('MouseEvents');\n        event.initEvent('click', true, true);\n        pom.dispatchEvent(event);\n      }\n      else {\n        pom.click();\n      }\n      \n    },  \n    editSave() {\n      let oldFileName = this.currentFileName\n      let filename = oldFileName.substr(0, oldFileName.lastIndexOf(\".\")) + '.svg'\n      this.downloadFile(filename)\n    },\n    alert(message) {\n      alert(message)\n    },\n    inputFile(newFile, oldFile, prevent) {\n      if (newFile && !oldFile) {\n        this.$nextTick(function () {\n          this.edit = true\n        })\n      }\n      if (!newFile && oldFile) {\n        this.edit = false\n      }\n      if (newFile) {\n        let self = this\n        var reader = new FileReader();\n        reader.addEventListener(\"load\", function() {\n          self.imageData = reader.result\n          if (/\\.(svg)$/i.test(newFile.name)) {\n            self.isXmlSvg = true\n          }\n        });\n        reader.readAsDataURL(newFile.file);\n        self.currentFileName = newFile.name\n      }\n    },\n    inputFilter(newFile, oldFile, prevent) {\n      if (newFile && !oldFile) {\n        if (!/\\.(gif|jpg|jpeg|png|svg)$/i.test(newFile.name)) {\n          this.alert('Your choice is not a image file')\n          return prevent()\n        }\n      }\n      if (newFile && (!oldFile || newFile.file !== oldFile.file)) {\n        newFile.url = ''\n        let URL = window.URL || window.webkitURL\n        if (URL && URL.createObjectURL) {\n          newFile.url = URL.createObjectURL(newFile.file)\n        }\n      }\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ImageConvert.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"image-convert\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$refs.upload && _vm.$refs.upload.dropActive),expression:\"$refs.upload && $refs.upload.dropActive\"}],staticClass:\"drop-active\"},[_c('h3',[_vm._v(\"Drop files to upload\")])]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.edit),expression:\"!edit\"}],staticClass:\"image-upload\"},[_c('div',{staticClass:\"text-center\"},[_c('label',{attrs:{\"for\":\"image\"}},[_c('div',{staticClass:\"rounded\"},[_c('img',{attrs:{\"src\":_vm.files.length ? _vm.files[0].url : 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D'}})]),_vm._v(\" \"),_c('h4',{staticClass:\"pt-2\"},[_vm._v(\"Drop file anywhere to edit\")]),_vm._v(\" \"),_c('h5',{staticClass:\"pt-2\"},[_vm._v(\"or\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"text-center p-2\"},[_c('file-upload',{ref:\"upload\",staticClass:\"btn btn-primary\",attrs:{\"extensions\":\"gif,jpg,jpeg,png,svg\",\"accept\":\"image/png,image/gif,image/jpeg, image/svg+xml\",\"name\":\"image\",\"post-action\":\"/upload/post\",\"drop\":!_vm.edit},on:{\"input-filter\":_vm.inputFilter,\"input-file\":_vm.inputFile},model:{value:(_vm.files),callback:function ($$v) {_vm.files=$$v},expression:\"files\"}},[_vm._v(\"\\n        Select Image\\n      \")])],1)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.files.length && _vm.edit),expression:\"files.length && edit\"}],staticClass:\"image-edit\"},[(_vm.files.length)?_c('div',{staticClass:\"image-edit-image\"},[_c('img',{ref:\"editImage\",attrs:{\"src\":_vm.imageData ? _vm.imageData : _vm.files[0].url}})]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"text-center p-4\"},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();_vm.editInDrawio($event)}}},[_vm._v(\"Edit\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"},on:{\"click\":function($event){$event.preventDefault();_vm.editSave($event)}}},[_vm._v(\"Save\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.preventDefault();_vm.reset($event)}}},[_vm._v(\"Cancel\")])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-60982950\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ImageConvert.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-60982950\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ImageConvert.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ImageConvert.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ImageConvert.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-60982950\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ImageConvert.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-60982950\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ImageConvert.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\nimport ImageConvert from '@/components/ImageConvert.vue'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'ImageConvert',\n      component: ImageConvert\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import Vue from 'vue'\nimport App from './App'\nimport router from './router'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  render: h => h(App)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}