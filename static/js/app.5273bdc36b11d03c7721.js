webpackJsonp([1],{"4owP":function(e,t){},"7VOH":function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("/5sW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var a=i("VU/8")({name:"App"},n,!1,function(e){i("vGjf")},null,null).exports,o=i("/ocq"),s=i("mvHQ"),l=i.n(s),u=i("xe4/");function d(e){for(var t=new Array(e.length),i=0;i<e.length;i++)t[i]=String.fromCharCode(e[i]);return t.join("")}function c(e){if(window.DOMParser)return(new DOMParser).parseFromString(e,"text/xml");var t=function(){var e=null;document.implementation&&document.implementation.createDocument?e=document.implementation.createDocument("","",null):window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLDOM"));return e}();return t.async="false",t.loadXML(e),t}for(var f=function(e,t){return function(){return t.apply(e,arguments)}},p=[],h=0;h<256;h++)for(var m=h,v=0;v<8;v++)1==(1&m)?m=3988292384^m>>>1:m>>>=1,p[h]=m;var g=function(e,t,i,r){for(var n=e,a=0;a<r;a++)n=p[255&(n^t[i+a])]^n>>>8;return n},b=navigator.userAgent.indexOf("AppleWebKit/")>=0&&navigator.userAgent.indexOf("Chrome/")<0&&navigator.userAgent.indexOf("Edge/")<0,w={compress:function(e){if(null==e||0==e.length||void 0===u)return e;var t=d(u.deflateRaw(encodeURIComponent(e)));return window.btoa?btoa(t):Base64.encode(t,!0)},createMxGraphModel:function(e,t,i){var r;try{var n=c("<mxGraphModel></mxGraphModel>"),a=n.documentElement,o=e.substring(e.indexOf(",")+1);if(null!=a){a.setAttribute("dx","480"),a.setAttribute("dy","550"),a.setAttribute("grid","1"),a.setAttribute("gridSize","10"),a.setAttribute("guides","1"),a.setAttribute("tooltips","1"),a.setAttribute("fold","1"),a.setAttribute("page","1"),a.setAttribute("pageScale","1"),a.setAttribute("pageWidth","850"),a.setAttribute("pageHeight","1100"),a.setAttribute("background","#ffffff"),a.setAttribute("math","0"),a.setAttribute("shadow","0");var s=n.createElement("root");a.append(s);var l=n.createElement("mxCell");l.setAttribute("id","0"),s.append(l);var u=n.createElement("mxCell");u.setAttribute("id","1"),u.setAttribute("parent","0"),s.append(u);var d=n.createElement("mxCell");s.append(d),d.setAttribute("id","2"),d.setAttribute("value","");var f="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,"+o;d.setAttribute("style",f),d.setAttribute("parent","1"),d.setAttribute("vertex","1");var p=n.createElement("mxGeometry");return p.setAttribute("x",t/2),p.setAttribute("y",i/2),p.setAttribute("width",t),p.setAttribute("height",i),p.setAttribute("as","geometry"),d.append(p),r=a,window.ActiveXObject?r.xml:(new XMLSerializer).serializeToString(r)}}catch(e){}},extractGraphModelFromPng:function(e){var t=null;try{var i=e.substring(e.indexOf(",")+1),r=window.atob&&!b?atob(i):Base64.decode(i,!0);!function(e,t,i){var r=0;function n(e,t){var i=r;return r+=t,e.substring(i,r)}if(n(e,8)==String.fromCharCode(137)+"PNG"+String.fromCharCode(13,10,26,10))if(n(e,4),"IHDR"==n(e,4)){n(e,17);do{var a=(s=void 0,(s=n(e,4)).charCodeAt(3)+(s.charCodeAt(2)<<8)+(s.charCodeAt(1)<<16)+(s.charCodeAt(0)<<24)),o=n(e,4);if(null!=t&&t(r-8,o,a))break;if(value=n(e,a),n(e,4),"IEND"==o)break}while(a);var s}else null!=i&&i();else null!=i&&i()}(r,f(this,function(e,i,n){var a=r.substring(e+8,e+8+n);if("zTXt"==i){var o=a.indexOf(String.fromCharCode(0));if("mxGraphModel"==a.substring(0,o)){var s=d(u.inflateRaw(a.substring(o+2))).replace(/\+/g," ");null!=s&&s.length>0&&(t=s)}}else if("tEXt"==i){var l=a.split(String.fromCharCode(0));l.length>1&&"mxGraphModel"==l[0]&&(t=l[1])}if(null!=t||"IDAT"==i)return!0}))}catch(e){}return null!=t&&"%"==t.charAt(0)&&(t=decodeURIComponent(t)),null!=t&&"%"==t.charAt(0)&&(t=decodeURIComponent(t)),t},writeGraphModelToPng:function(e,t,i,r,n){var a=e.substring(e.indexOf(",")+1),o=window.atob?atob(a):Base64.decode(a,!0),s=0;function l(e,t){var i=s;return s+=t,e.substring(i,s)}function u(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}if(l(o,8)==String.fromCharCode(137)+"PNG"+String.fromCharCode(13,10,26,10)){if(l(o,4),"IHDR"==l(o,4)){l(o,17);var d,c=o.substring(0,s);do{var f=(d=void 0,(d=l(o,4)).charCodeAt(3)+(d.charCodeAt(2)<<8)+(d.charCodeAt(1)<<16)+(d.charCodeAt(0)<<24));if("IDAT"==l(o,4)){c=o.substring(0,s-8);var p=i+String.fromCharCode(0)+("zTXt"==t?String.fromCharCode(0):"")+r,h=4294967295;h=g(h,t,0,4),h=g(h,p,0,p.length),c+=u(p.length)+t+p+u(4294967295^h),c+=o.substring(s-8,o.length);break}c+=o.substring(s-8,s-4+f),l(o,f),l(o,4)}while(f);return"data:image/png;base64,"+(window.btoa?btoa(c):Base64.encode(c,!0))}null!=n&&n()}else null!=n&&n()}},y=i("Gu7T"),A=i.n(y),x=i("//Fk"),D=i.n(x),C=i("Dd8w"),E=i.n(C),O=i("pFYg"),j=i.n(O),I={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{attrs:{type:"file",name:e.$parent.name,id:e.$parent.inputId||e.$parent.name,accept:e.$parent.accept,webkitdirectory:e.$parent.directory&&e.$parent.features.directory,directory:e.$parent.directory&&e.$parent.features.directory,multiple:e.$parent.multiple&&e.$parent.features.html5},on:{change:e.change}})},staticRenderFns:[]},$={components:{InputFile:i("VU/8")({methods:{change:function(e){this.$destroy(),this.$parent.addInputFile(e.target),new this.constructor({parent:this.$parent,el:this.$el})}}},I,!1,null,null,null).exports},props:{inputId:{type:String},name:{type:String,default:"file"},accept:{type:String},multiple:{type:Boolean},maximum:{type:Number,default:function(){return this.multiple?0:1}},addIndex:{type:[Boolean,Number]},directory:{type:Boolean},postAction:{type:String},putAction:{type:String},headers:{type:Object,default:Object},data:{type:Object,default:Object},timeout:{type:Number,default:0},drop:{default:!1},dropDirectory:{type:Boolean,default:!0},size:{type:Number,default:0},extensions:{default:Array},value:{type:Array,default:Array},thread:{type:Number,default:1}},data:function(){return{files:this.value,features:{html5:!0,directory:!1,drag:!1},active:!1,dropActive:!1,uploading:0,destroy:!1}},mounted:function(){var e=document.createElement("input");e.type="file",e.multiple=!0,window.FormData&&e.files?("boolean"!=typeof e.webkitdirectory&&"boolean"!=typeof e.directory||(this.features.directory=!0),this.features.html5&&void 0!==e.ondrop&&(this.features.drop=!0)):this.features.html5=!1,this.maps={},this.$nextTick(function(){this.$parent&&this.$parent.$forceUpdate(),this.watchDrop(this.drop)})},beforeDestroy:function(){this.destroy=!0,this.active=!1},computed:{uploaded:function(){for(var e=void 0,t=0;t<this.files.length;t++)if((e=this.files[t]).fileObject&&!e.error&&!e.success)return!1;return!0},className:function(){return["file-uploads",this.features.html5?"file-uploads-html5":"file-uploads-html4",this.features.directory&&this.directory?"file-uploads-directory":void 0,this.features.drop&&this.drop?"file-uploads-drop":void 0]}},watch:{active:function(e){this.watchActive(e)},dropActive:function(){this.$parent&&this.$parent.$forceUpdate()},drop:function(e){this.watchDrop(e)},value:function(e){if(this.files!==e){this.files=e;var t=this.maps;this.maps={};for(var i=0;i<this.files.length;i++){var r=this.files[i];this.maps[r.id]=r}for(var n in this.maps){var a=this.maps[n],o=t[n];a!==o&&this.emitFile(a,o)}for(var s in t)this.maps[s]||this.emitFile(void 0,t[s])}}},methods:{clear:function(){if(this.files.length){var e=this.files;this.files=[],this.maps={},this.emitInput();for(var t=0;t<e.length;t++)this.emitFile(void 0,e[t])}return!0},get:function(e){return!!e&&("object"===(void 0===e?"undefined":j()(e))?this.maps[e.id]||!1:this.maps[e]||!1)},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.addIndex,i=e,r=i instanceof Array;r||(i=[i]);for(var n=[],a=0;a<i.length;a++){var o=i[a];this.features.html5&&o instanceof Blob&&(o={file:o,size:o.size,name:o.webkitRelativePath||o.relativePath||o.name||"unknown",type:o.type});var s=!1;if(!1===o.fileObject||(o.fileObject?s=!0:"undefined"!=typeof Element&&o.el instanceof Element?s=!0:"undefined"!=typeof Blob&&o.file instanceof Blob&&(s=!0)),s&&((o=E()({fileObject:!0,size:-1,name:"Filename",type:"",active:!1,error:"",success:!1,putAction:this.putAction,postAction:this.postAction,timeout:this.timeout},o,{response:{},progress:"0.00",speed:0})).data=E()({},this.data,o.data?o.data:{}),o.headers=E()({},this.headers,o.headers?o.headers:{})),o.id||(o.id=Math.random().toString(36).substr(2)),!this.emitFilter(o,void 0)){if(this.maximum>1&&n.length+this.files.length>=this.maximum)break;if(n.push(o),1===this.maximum)break}}if(!n.length)return!1;1===this.maximum&&this.clear();var l=void 0;!0===t||0===t?l=n.concat(this.files):t?(l=n.concat([])).splice(t,0,n):l=this.files.concat(n),this.files=l;for(var u=0;u<n.length;u++){var d=n[u];this.maps[d.id]=d}this.emitInput();for(var c=0;c<n.length;c++)this.emitFile(n[c],void 0);return r?n:n[0]},addInputFile:function(e){var t=[];if(e.files)for(var i=0;i<e.files.length;i++){var r=e.files[i];t.push({size:r.size,name:r.webkitRelativePath||r.relativePath||r.name,type:r.type,file:r,el:e})}else t.push({name:e.value.replace(/^.*?([^\/\\\r\n]+)$/,"$1"),el:e});return this.add(t)},addDataTransfer:function(e){var t=this,i=[];if(e.items&&e.items.length){for(var r=[],n=0;n<e.items.length;n++){var a=e.items[n];(a=a.getAsEntry?a.getAsEntry()||a.getAsFile():a.webkitGetAsEntry&&a.webkitGetAsEntry()||a.getAsFile())&&r.push(a)}return new D.a(function(e,n){!function n(a){var o=r[a];if(!o||t.maximum>0&&i.length>=t.maximum)return e(t.add(i));t.getEntry(o).then(function(e){i.push.apply(i,A()(e)),n(a+1)})}(0)})}if(e.files.length){for(var o=0;o<e.files.length&&(i.push(e.files[o]),!(this.maximum>0&&i.length>=this.maximum));o++);return D.a.resolve(this.add(i))}return D.a.resolve([])},getEntry:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new D.a(function(r,n){if(e.isFile)e.file(function(e){r([{size:e.size,name:i+e.name,type:e.type,file:e}])});else if(e.isDirectory&&t.dropDirectory){var a=[],o=e.createReader();!function n(){o.readEntries(function(o){!function s(l){return!o[l]&&0===l||t.maximum>0&&a.length>=t.maximum?r(a):o[l]?void t.getEntry(o[l],i+e.name+"/").then(function(e){a.push.apply(a,A()(e)),s(l+1)}):n()}(0)})}()}else r([])})},replace:function(e,t){var i=this.get(e),r=this.get(t);if(!i||!r||i===r)return!1;var n=this.files.concat([]),a=n.indexOf(i),o=n.indexOf(r);return-1!==a&&-1!==o&&(n[a]=r,n[o]=i,this.files=n,this.emitInput(),!0)},remove:function(e){var t=this.get(e);if(t){if(this.emitFilter(void 0,t))return!1;var i=this.files.concat([]),r=i.indexOf(t);if(-1===r)return console.error("remove",t),!1;i.splice(r,1),this.files=i,delete this.maps[t.id],this.emitInput(),this.emitFile(void 0,t)}return t},update:function(e,t){var i=this.get(e);if(i){var r=E()({},i,t);if(!i.fileObject||!i.active||r.active||r.error||r.success||(r.error="abort"),this.emitFilter(r,i))return!1;var n=this.files.concat([]),a=n.indexOf(i);return-1===a?(console.error("update",i),!1):(n.splice(a,1,r),this.files=n,delete this.maps[i.id],this.maps[r.id]=r,this.emitInput(),this.emitFile(r,i),r)}return!1},emitFilter:function(e,t){var i=!1;return this.$emit("input-filter",e,t,function(){return i=!0}),i},emitFile:function(e,t){this.$emit("input-file",e,t),!(e&&e.fileObject&&e.active)||t&&t.active?e&&e.fileObject&&e.active||!t||!t.fileObject||!t.active||this.uploading--:(this.uploading++,this.$nextTick(function(){var t=this;setTimeout(function(){t.upload(e).then(function(){(e=t.get(e))&&e.fileObject&&t.update(e,{active:!1,success:!e.error})}).catch(function(i){t.update(e,{active:!1,success:!1,error:i.code||i.error||i.message||i})})},parseInt(50*Math.random()+50,10))})),!this.active||Boolean(e)===Boolean(t)&&e.active===t.active||this.watchActive(!0)},emitInput:function(){this.$emit("input",this.files)},upload:function(e){var t=this.get(e);if(!t)return D.a.reject("not_exists");if(!t.fileObject)return D.a.reject("file_object");if(t.error)return D.a.reject(t.error);if(t.success)return D.a.resolve(t);var i=this.extensions;return i&&(i.length||void 0===i.length)&&("object"===(void 0===i?"undefined":j()(i))&&i instanceof RegExp||("string"==typeof i&&(i=i.split(",").map(function(e){return e.trim()}).filter(function(e){return e})),i=new RegExp("\\.("+i.join("|").replace(/\./g,"\\.")+")$","i")),-1===t.name.search(i))?D.a.reject("extension"):this.size>0&&t.size>=0&&t.size>this.size?D.a.reject("size"):this.features.html5&&t.putAction?this.uploadPut(t):this.features.html5?this.uploadHtml5(t):this.uploadHtml4(t)},uploadPut:function(e){var t=[],i=void 0;for(var r in e.data)null!==(i=e.data[r])&&void 0!==i&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(i));var n=t.length?(-1===e.putAction.indexOf("?")?"?":"&")+t.join("&"):"",a=new XMLHttpRequest;return a.open("PUT",e.putAction+n),this.uploadXhr(a,e,e.file)},uploadHtml5:function(e){var t=new window.FormData,i=void 0;for(var r in e.data)(i=e.data[r])&&"object"===(void 0===i?"undefined":j()(i))&&"function"!=typeof i.toString?i instanceof File?t.append(r,i,i.name):t.append(r,l()(i)):null!==i&&void 0!==i&&t.append(r,i);t.append(this.name,e.file,e.file.filename||e.name);var n=new XMLHttpRequest;return n.open("POST",e.postAction),this.uploadXhr(n,e,t)},uploadXhr:function(e,t,i){var r=this,n=t,a=0,o=0;e.upload.onprogress=function(e){if(n=r.get(n),e.lengthComputable&&n&&n.fileObject&&n.active){var t=Math.round(Date.now()/1e3);t!==a&&(a=t,n=r.update(n,{progress:(e.loaded/e.total*100).toFixed(2),speed:e.loaded-o}),o=e.loaded)}};var s=setInterval(function(){if(!(n=r.get(n))||!n.fileObject||n.success||n.error||!n.active){s&&(clearInterval(s),s=!1);try{e.abort(),e.timeout=1}catch(e){}}},100);return new D.a(function(t,a){var o=void 0,l=function(i){if(!o){if(o=!0,s&&(clearInterval(s),s=!1),!(n=r.get(n)))return a("not_exists");if(!n.fileObject)return a("file_object");if(n.error)return a(n.error);if(!n.active)return a("abort");if(n.success)return t(n);var l={};switch(i.type){case"timeout":case"abort":l.error=i.type;break;case"error":e.status?e.status>=500?l.error="server":e.status>=400&&(l.error="denied"):l.error="network";break;default:e.status>=500?l.error="server":e.status>=400?l.error="denied":l.progress="100.00"}if(e.responseText){var u=e.getResponseHeader("Content-Type");u&&-1!==u.indexOf("/json")?l.response=JSON.parse(e.responseText):l.response=e.responseText}return(n=r.update(n,l)).error?a(n.error):t(n)}};e.onload=l,e.onerror=l,e.onabort=l,e.ontimeout=l,n.timeout&&(e.timeout=n.timeout);for(var u in n.headers)e.setRequestHeader(u,n.headers[u]);n=r.update(n,{xhr:e}),e.send(i)})},uploadHtml4:function(e){var t=this,i=e,r=function(e){27===e.keyCode&&e.preventDefault()},n=document.createElement("iframe");n.id="upload-iframe-"+i.id,n.name="upload-iframe-"+i.id,n.src="about:blank",n.setAttribute("style","width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;");var a=document.createElement("form");a.action=i.postAction,a.name="upload-form-"+i.id,a.setAttribute("method","POST"),a.setAttribute("target","upload-iframe-"+i.id),a.setAttribute("enctype","multipart/form-data");var o=void 0,s=void 0;for(var u in i.data)(o=i.data[u])&&"object"===(void 0===o?"undefined":j()(o))&&"function"!=typeof o.toString&&(o=l()(o)),null!==o&&void 0!==o&&((s=document.createElement("input")).type="hidden",s.name=u,s.value=o,a.appendChild(s));a.appendChild(i.el),document.body.appendChild(n).appendChild(a);return new D.a(function(e,o){setTimeout(function(){if(!(i=t.update(i,{iframe:n})))return o("not_exists");var s=setInterval(function(){(i=t.get(i))&&i.fileObject&&!i.success&&!i.error&&i.active||(s&&(clearInterval(s),s=!1),n.onabort({type:i?"abort":"not_exists"}))},100),l=void 0,u=function(a){if(!l){if(l=!0,s&&(clearInterval(s),s=!1),document.body.removeEventListener("keydown",r),!(i=t.get(i)))return o("not_exists");if(!i.fileObject)return o("file_object");if(i.error)return o(i.error);if(!i.active)return o("abort");if(i.success)return e(i);var u=function(){var e=void 0;try{n.contentWindow&&(e=n.contentWindow.document)}catch(e){}if(!e)try{e=n.contentDocument?n.contentDocument:n.document}catch(t){e=n.document}return e&&e.body?e.body.innerHTML:null}(),d={};switch(a.type){case"abort":d.error="abort";break;case"error":i.error?d.error=i.error:d.error=null===u?"network":"denied";break;default:i.error?d.error=i.error:null===d?d.error="network":d.progress="100.00"}if(null!==u){if(u&&"{"===u.substr(0,1)&&"}"===u.substr(u.length-1,1))try{u=JSON.parse(u)}catch(e){}d.response=u}return(i=t.update(i,d)).error?o(i.error):e(i)}};n.onload=u,n.onerror=u,n.onabort=u,document.body.addEventListener("keydown",r),a.submit()},50)}).then(function(e){return n.parentNode&&n.parentNode.removeChild(n),e}).catch(function(e){return n.parentNode&&n.parentNode.removeChild(n),e})},watchActive:function(e){for(var t=void 0,i=0;t=this.files[i];)if(i++,t.fileObject)if(e&&!this.destroy){if(this.uploading>=this.thread||this.uploading&&!this.features.html5)break;t.active||t.error||t.success||this.update(t,{active:!0})}else t.active&&this.update(t,{active:!1});else;0===this.uploading&&(this.active=!1)},watchDrop:function(e){var t=e;if(this.features.drop){if(this.dropElement)try{document.removeEventListener("dragenter",this.onDragenter,!1),document.removeEventListener("dragleave",this.onDragleave,!1),document.removeEventListener("drop",this.onDocumentDrop,!1),this.dropElement.removeEventListener("dragover",this.onDragover,!1),this.dropElement.removeEventListener("drop",this.onDrop,!1)}catch(e){}t?"string"==typeof t?t=document.querySelector(t)||this.$root.$el.querySelector(t):!0===t&&(t=this.$parent.$el):t=!1,this.dropElement=t,this.dropElement&&(document.addEventListener("dragenter",this.onDragenter,!1),document.addEventListener("dragleave",this.onDragleave,!1),document.addEventListener("drop",this.onDocumentDrop,!1),this.dropElement.addEventListener("dragover",this.onDragover,!1),this.dropElement.addEventListener("drop",this.onDrop,!1))}},onDragenter:function(e){e.preventDefault(),this.dropActive||(this.dropActive=!0)},onDragleave:function(e){e.preventDefault(),("HTML"===e.target.nodeName||0===e.screenX&&0===e.screenY&&!e.fromElement&&e.offsetX<=0)&&(this.dropActive=!1)},onDragover:function(e){e.preventDefault()},onDocumentDrop:function(){this.dropActive=!1},onDrop:function(e){e.preventDefault(),this.addDataTransfer(e.dataTransfer)}}},S={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{class:e.className},[e._t("default"),e._v(" "),i("input-file")],2)},staticRenderFns:[]};var F=i("VU/8")($,S,!1,function(e){i("7VOH")},null,null).exports,_={name:"drawio-frame",data:function(){return{loaded:!1,iframe:{src:window.location.href,style:null,wrapperStyle:null}}},mounted:function(){this.$refs.editor;this.iframe.style={border:0,position:fixed,top:0,left:0,right:0,bottom:0,width:"100%",height:"100%"},this.iframe.wrapperStyle={overflow:"hidden",height:"100%",width:"100%"},this.loaded=!0},props:{url:{type:String,required:!0}},methods:{loadIframe:function(){console.log("Iframe.......",this.url,this.frame,this.type);var e=document.getElementById(this.frame);e.src=this.url,e.onload=function(){}}}},k={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{style:e.iframe.wrapperStyle,attrs:{id:"iframe-wrapper"}},[e.loaded?i("iframe",{style:e.iframe.style,attrs:{src:e.url,height:e.iframe.style.height,width:e.iframe.style.width,frameborder:"0"}}):e._e()])},staticRenderFns:[]},M=i("VU/8")(_,k,!1,null,null,null).exports;r.a.component("drawio-iframe",M);var R={components:{FileUpload:F,DrawioIFrame:M},data:function(){return{imageData:null,files:[],edit:!1,drawio_url:"",drawIoWindow:null,isXmlSvg:!1}},watch:{edit:function(e){e&&this.$nextTick(function(){this.$refs.editImage})}},methods:{reset:function(){this.$refs.upload.clear(),this.edit=!1,this.files.length=0,this.imageData=null},insertModelInPng:function(){var e=this,t=w.extractGraphModelFromPng(e.imageData);if(!t){var i=e.$refs.editImage.naturalWidth,r=e.$refs.editImage.naturalHeight;(t=w.createMxGraphModel(e.imageData,i,r))&&(this.imageData=w.writeGraphModelToPng(e.imageData,"zTXt","mxGraphModel",atob(w.compress(t))))}},editInDrawio:function(){var e=this.drawIoWindow,t=this;if(t.isXmlSvg||this.insertModelInPng(),null==e||e.closed){window.addEventListener("message",function i(r){if(r.data.length>0&&r.source==e){var n=JSON.parse(r.data);"init"==n.event?t.isXmlSvg?e.postMessage(l()({action:"load",xml:t.imageData}),"*"):e.postMessage(l()({action:"load",xmlpng:t.imageData}),"*"):"save"==n.event?e.postMessage(l()({action:"export",format:"xmlsvg",spinKey:"saving"}),"*"):"export"==n.event&&n.data&&(t.imageData=n.data,t.isXmlSvg=!0),"exit"!=n.event&&"export"!=n.event||(window.removeEventListener("message",i),e.close(),t.drawIoWindow=null)}}),e=window.open("https://www.draw.io/?embed=1&ui=atlas&spin=1&modified=unsavedChanges&proto=json"),t.drawIoWindow=e}else e.focus()},editImage:function(){},downloadFile:function(e){if(this.isXmlSvg){var t=document.createElement("a");if(t.setAttribute("href",this.imageData),t.setAttribute("download",e),document.createEvent){var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!0),t.dispatchEvent(i)}else t.click()}else alert("No SVG data")},editSave:function(){var e=this.currentFileName,t=e.substr(0,e.lastIndexOf("."))+".svg";this.downloadFile(t)},alert:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){alert(e)}),inputFile:function(e,t,i){if(e&&!t&&this.$nextTick(function(){this.edit=!0}),!e&&t&&(this.edit=!1),e){var r=this,n=new FileReader;n.addEventListener("load",function(){r.imageData=n.result,/\.(svg)$/i.test(e.name)&&(r.isXmlSvg=!0)}),n.readAsDataURL(e.file),r.currentFileName=e.name}},inputFilter:function(e,t,i){if(e&&!t&&!/\.(gif|jpg|jpeg|png|svg)$/i.test(e.name))return this.alert("Your choice is not a image file"),i();if(e&&(!t||e.file!==t.file)){e.url="";var r=window.URL||window.webkitURL;r&&r.createObjectURL&&(e.url=r.createObjectURL(e.file))}}}},L={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"image-convert"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.$refs.upload&&e.$refs.upload.dropActive,expression:"$refs.upload && $refs.upload.dropActive"}],staticClass:"drop-active"},[i("h3",[e._v("Drop files to upload")])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.edit,expression:"!edit"}],staticClass:"image-upload"},[i("div",{staticClass:"text-center"},[i("label",{attrs:{for:"image"}},[i("div",{staticClass:"rounded"},[i("img",{attrs:{src:e.files.length?e.files[0].url:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D"}})]),e._v(" "),i("h4",{staticClass:"pt-2"},[e._v("Drop file anywhere to edit")]),e._v(" "),i("h5",{staticClass:"pt-2"},[e._v("or")])])]),e._v(" "),i("div",{staticClass:"text-center p-2"},[i("file-upload",{ref:"upload",staticClass:"btn btn-primary",attrs:{extensions:"gif,jpg,jpeg,png,svg",accept:"image/png,image/gif,image/jpeg, image/svg+xml",name:"image","post-action":"/upload/post",drop:!e.edit},on:{"input-filter":e.inputFilter,"input-file":e.inputFile},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}},[e._v("\n        Select Image\n      ")])],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.files.length&&e.edit,expression:"files.length && edit"}],staticClass:"image-edit"},[e.files.length?i("div",{staticClass:"image-edit-image"},[i("img",{ref:"editImage",attrs:{src:e.imageData?e.imageData:e.files[0].url}})]):e._e(),e._v(" "),i("div",{staticClass:"text-center p-4"},[i("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.editInDrawio(t)}}},[e._v("Edit")]),e._v(" "),i("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(t){t.preventDefault(),e.editSave(t)}}},[e._v("Save")]),e._v(" "),i("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(t){t.preventDefault(),e.reset(t)}}},[e._v("Cancel")])])])])},staticRenderFns:[]};var T=i("VU/8")(R,L,!1,function(e){i("4owP")},"data-v-60982950",null).exports;r.a.use(o.a);var N=new o.a({routes:[{path:"/",name:"ImageConvert",component:T}]});r.a.config.productionTip=!1,new r.a({el:"#app",router:N,render:function(e){return e(a)}})},vGjf:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.5273bdc36b11d03c7721.js.map